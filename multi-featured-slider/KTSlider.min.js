$.fn.KTSlider=function(e){KTSlider=this,ele=$(this),KTcontain=".ktslide-container",KTSlider.options=$.extend({selector:"null",interval:5e3,toggleSlideContainer:"toggle-slides",autorotate:!0,slidedata:[],afterSlideSwitch:function(e){}},e),KTSlider.init=function(){ele.attr({"class":"KTslider-holder"}),ele.css({background:'url("'+KTSlider.options.bg+'") no-repeat scroll 0 80% / cover rgba(0, 0, 0, 0)'}),ele.append($("<div/>").addClass("ktslide-container")),elecont=$(KTcontain,ele),elecont.append(KTSlider.toggleSlideOptions()),KTSlider.options.autorotate&&(elecont.append(KTSlider.playControls()),KTSlider.autorotate()),window.location.hash&&(hash=window.location.hash.replace(/^.*?#\//,"")),position="undefined"==typeof hash||"undefined"==typeof KTSlider.options.slideUrl[hash]?Object.keys(KTSlider.options.slideUrl)[0]:hash,KTSlider.slideTO(position),KTSlider.bindEvents()},KTSlider.bindEvents=function(){$(".switch-input",KTcontain).change(function(){$(this).is(":checked")?window.KTtimer&&KTSlider.autorotate():KTSlider.cancelautorotate()}),$(".toggle-slides a",KTcontain).click(function(e){KTSlider.cancelautorotate(),KTSlider.slideTO($(this).attr("data-rel")),KTSlider.autorotate()}),$(KTcontain).on("click",".sections .nav-tabs a",function(e){e.preventDefault(),section=$(this).attr("data-toggle").replace(window.currentSlide+"-",""),KTSlider.sectionTO(section)}),$(KTcontain).on("mouseover",".tab-content, .nav.nav-tabs li",function(e){$(".switch-input",KTcontain).is(":checked")&&$(".switch-input",KTcontain).trigger("click")}),$(KTcontain).on("mouseout",".tab-content, .nav.nav-tabs li",function(e){$(".switch-input",KTcontain).trigger("click")})},KTSlider.sectionTO=function(e){sectionContainer=$("#"+window.currentSlide+" .sections",KTcontain),id=window.currentSlide+"-"+e,$(".tab-pane",sectionContainer).removeClass("in active"),$("#"+id,sectionContainer).addClass("in active"),$("ul.nav-tabs li",sectionContainer).removeClass("active"),$("ul.nav-tabs li."+id,sectionContainer).addClass("active")},KTSlider.slideTO=function(e){currentPos="undefined"==typeof e?Object.keys(KTSlider.options.slideUrl)[0]:e,window.currentSlide=currentPos,window.currentSlideData="currentPos",0==$(".KTslider#"+currentPos,ele).length?$.ajax({type:"get",url:KTSlider.options.slideUrl[currentPos].url,dataType:"json",success:function(e){KTSlider.options.slidedata[currentPos]=e;KTSlider.prepareSlide(currentPos,e),KTSlider.activateToggle(currentPos),$(".KTslider",ele).fadeOut(),$(".KTslider#"+currentPos,ele).fadeIn(),$(".KTslider#"+currentPos+" .sections .nav-tabs li:first a",ele).trigger("click"),KTSlider.options.afterSlideSwitch.call(KTSlider,e)},error:function(){KTSlider.prepareSlide(currentPos,"error")}}):(KTSlider.activateToggle(currentPos),$(".KTslider",ele).fadeOut(),ele.css({background:'url("'+$(".KTslider#"+currentPos,ele).attr("bg-src")+'") no-repeat scroll 0 80% / cover rgba(0, 0, 0, 0)'}),$(".KTslider#"+currentPos,ele).fadeIn(),$(".KTslider#"+currentPos+" .sections .nav-tabs li:first a",ele).trigger("click"),KTSlider.options.afterSlideSwitch.call(KTSlider,KTSlider.options.slidedata[currentPos]))},KTSlider.currentSlide=function(){return $(".KTslider:visible",ele).attr("data-pos")},KTSlider.currentSection=function(){return currentslide=$(".KTslider:visible",ele),$(".sections .nav-tabs li.active a",currentslide).attr("data-toggle")},KTSlider.prepareSlide=function(e,t){$sliderContainer=$("<div/>").attr({"data-pos":currentPos,id:currentPos,"class":"KTslider "+currentPos,style:"display:none;"}),"undefined"!=typeof t.background?(ele.css({background:'url("'+t.background+'") no-repeat scroll 0 80% / cover rgba(0, 0, 0, 0)'}),$sliderContainer.attr("bg-src",t.background)):(ele.css({background:'url("'+KTSlider.options.bg+'") no-repeat scroll 0 80% / cover rgba(0, 0, 0, 0)'}),$sliderContainer.attr("bg-src",KTSlider.options.bg)),"error"==t?$right=$("<div/>").addClass("right-cont").html("Oops! Something went wrong finding service.."):($right=$("<div/>").addClass("right-cont").html(t.content),$sliderContainer.append($right),$sliderContainer.append(KTSlider.prepareTabs(t,e))),$(KTcontain,ele).append($sliderContainer)},KTSlider.prepareTabs=function(e,t){return $left=$("<div/>").addClass("left-cont sections header-left-services"),$tabsActions=$("<ul/>").addClass("nav nav-tabs"),$tabsContent=$("<div/>").addClass("tab-content"),$i=0,$.each(e.subblocks,function(e,i){"Gallery"!=i.type&&($class=0==$i?"active in":"",id=t+"-"+e,$actionElement=$("<li/>").attr({"class":$class+" "+id}).append($("<a/>").attr({href:"javascript:void(0)","data-toggle":id}).append(i.label)),$tabsActions.append($actionElement),$contentElement=$("<div/>").attr("id",id).addClass("tab-pane fade "+$class).append(i.data),$tabsContent.append($contentElement),$i++)}),$left.append($tabsActions),$left.append($tabsContent),$left},KTSlider.nextSectionAvailable=function(){return activeTab=$(".sections ul li.active",$("#"+window.currentSlide)),activeTab.next("li")},KTSlider.nextSlide=function(){currentpos=Object.keys(KTSlider.options.slideUrl).indexOf(KTSlider.currentSlide()),nextpos=Object.keys(KTSlider.options.slideUrl)[currentpos+1],KTSlider.slideTO(nextpos)},KTSlider.autorotate=function(e){$(".switch-input",KTcontain).is(":checked")&&!window.forceStop&&(window.KTtimer=setInterval(function(){nextAvailable=KTSlider.nextSectionAvailable(),0!=nextAvailable.length?KTSlider.sectionTO(nextAvailable.find("a").attr("data-toggle").replace(window.currentSlide+"-","")):KTSlider.nextSlide()},KTSlider.options.interval))},KTSlider.cancelautorotate=function(e){window.KTtimer&&clearInterval(window.KTtimer)},KTSlider.activateToggle=function(e){$("."+KTSlider.options.toggleSlideContainer,ele).find("i").attr("class","fa fa-circle"),$("."+KTSlider.options.toggleSlideContainer,ele).find("a."+e).find("i").attr("class","fa fa-circle-o")},KTSlider.toggleSlideOptions=function(){return $toggleSlide=$("<div>").addClass(KTSlider.options.toggleSlideContainer),$.each(KTSlider.options.slideUrl,function(e,t){$anchor=$("<a/>").attr({"data-rel":e,href:"#/"+e,"data-toggle":"tooltip","class":e,title:t.name}),$anchor.append($("<i>").addClass("fa fa-circle")),$toggleSlide.append($anchor)}),$toggleSlide},KTSlider.playControls=function(){return $return='<div class="switch-container">		<p class="switch-autoplay">Auto Play :</p>    <label class="switch">      <input type="checkbox" class="switch-input" checked="">      <span class="switch-label" data-on="On" data-off="Off"></span>      <span class="switch-handle"></span>    </label>    </div>',$return},KTSlider.init()};